# Sing-box Manager

ğŸš€ **è·¨å¹³å°çš„ Sing-box é…ç½®ä¸æ ¸å¿ƒè‡ªåŠ¨æ›´æ–°å·¥å…·** - çº¯ Rust CLI ç‰ˆæœ¬

## âœ¨ ç‰¹æ€§

- âœ… **è‡ªåŠ¨æ›´æ–°å†…æ ¸** - æ”¯æŒ sing-box æœ€æ–°ç‰ˆæœ¬è‡ªåŠ¨ä¸‹è½½å’Œå®‰è£…
- âœ… **è®¢é˜…ç®¡ç†** - è‡ªåŠ¨ä¸‹è½½å’Œæ›´æ–°é…ç½®æ–‡ä»¶
- âœ… **äº¤äº’å¼èœå•** - å‹å¥½çš„å‘½ä»¤è¡Œäº¤äº’ç•Œé¢
- âœ… **å®šæ—¶ä»»åŠ¡** - æ”¯æŒå®šæ—¶è‡ªåŠ¨æ›´æ–°
- âœ… **è·¨å¹³å°** - æ”¯æŒ macOSã€Linuxã€Windows
- âœ… **é›¶ä¾èµ–** - çº¯ Rust å®ç°ï¼Œæ— éœ€ Python æˆ–å…¶ä»–è¿è¡Œæ—¶

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. ç¼–è¯‘

```bash
cd config-manager
cargo build --release
```

ç¼–è¯‘å®Œæˆåï¼ŒäºŒè¿›åˆ¶æ–‡ä»¶ä½äºï¼š`target/release/singbox-manager`

### 2. é…ç½®

ç¼–è¾‘ `cm_config.json`ï¼š

```json
{
  "v2rayn_bin_path": "/Users/ä½ çš„ç”¨æˆ·å/Library/Application Support/v2rayN/bin",
  "conf_save_path": "/Users/ä½ çš„ç”¨æˆ·å/é…ç½®ä¿å­˜è·¯å¾„",
  "cores": {
    "singbox": {
      "repo": "SagerNet/sing-box",
      "binary_name": "sing-box",
      "subdir": "sing_box"
    }
  },
  "configs": [
    {
      "name": "é…ç½®æ–‡ä»¶å.conf",
      "url": "https://ä½ çš„è®¢é˜…åœ°å€"
    }
  ]
}
```

### 3. ä½¿ç”¨

#### äº¤äº’å¼æ¨¡å¼ï¼ˆæ¨èï¼‰

```bash
./target/release/singbox-manager --interactive
```

#### å‘½ä»¤è¡Œæ¨¡å¼

```bash
# ä¸€æ¬¡æ€§æ›´æ–°æ‰€æœ‰å†…å®¹
./target/release/singbox-manager --once

# å®šæ—¶æ›´æ–°ï¼ˆæ ¹æ®é…ç½®æ–‡ä»¶ä¸­çš„é—´éš”ï¼‰
./target/release/singbox-manager

# æŒ‡å®šé…ç½®æ–‡ä»¶
./target/release/singbox-manager --config my_config.json
```

#### å¿«é€Ÿå¯ç”¨è„šæœ¬

```bash
# ä¸€é”®ç¼–è¯‘ã€é…ç½®å’Œå¯ç”¨
chmod +x enable.sh
./enable.sh

# ä¸€é”®æ›´æ–°
chmod +x update.sh
./update.sh
```

## ğŸ“‹ åŠŸèƒ½è¯´æ˜

### è®¢é˜…ç®¡ç†

- è‡ªåŠ¨ä¸‹è½½é…ç½®æ–‡ä»¶
- æ”¯æŒå¤šä¸ªè®¢é˜…æº
- è‡ªåŠ¨åˆ›å»ºä¿å­˜ç›®å½•
- é”™è¯¯å¤„ç†å’Œé‡è¯•

### æ ¸å¿ƒæ›´æ–°

- è‡ªåŠ¨æ£€æµ‹æœ€æ–°ç‰ˆæœ¬
- æ”¯æŒé¢„å‘å¸ƒç‰ˆæœ¬ï¼ˆå¯é€‰ï¼‰
- è‡ªåŠ¨ä¸‹è½½å¹¶è§£å‹
- è·¨å¹³å°æ”¯æŒï¼ˆmacOS/Linux/Windowsï¼‰
- è‡ªåŠ¨è®¾ç½®æ‰§è¡Œæƒé™

### äº¤äº’å¼èœå•

- æŸ¥çœ‹å½“å‰é…ç½®
- ç®¡ç†è®¢é˜…æºï¼ˆæ·»åŠ /ç¼–è¾‘/åˆ é™¤ï¼‰
- æ‰‹åŠ¨è§¦å‘æ›´æ–°
- é…ç½®è®¾ç½®

## ğŸ”§ é…ç½®è¯´æ˜

### é…ç½®æ–‡ä»¶ç»“æ„

```json
{
  "subscriptions": [
    {
      "name": "è®¢é˜…åç§°",
      "url": "è®¢é˜…URL",
      "save_path": "ä¿å­˜è·¯å¾„"
    }
  ],
  "update_interval_hours": 24,
  "singbox_core_update": {
    "enabled": true,
    "check_prerelease": false,
    "install_path": "/usr/local/bin/sing-box"
  }
}
```

### é…ç½®é¡¹è¯´æ˜

- `subscriptions`: è®¢é˜…æºåˆ—è¡¨
  - `name`: è®¢é˜…åç§°ï¼ˆç”¨äºæ˜¾ç¤ºï¼‰
  - `url`: è®¢é˜…åœ°å€
  - `save_path`: é…ç½®æ–‡ä»¶ä¿å­˜è·¯å¾„
  
- `update_interval_hours`: è‡ªåŠ¨æ›´æ–°é—´éš”ï¼ˆå°æ—¶ï¼‰ï¼Œè®¾ä¸º 0 ç¦ç”¨å®šæ—¶æ›´æ–°

- `singbox_core_update`: Sing-box æ ¸å¿ƒæ›´æ–°é…ç½®
  - `enabled`: æ˜¯å¦å¯ç”¨æ ¸å¿ƒæ›´æ–°
  - `check_prerelease`: æ˜¯å¦æ£€æŸ¥é¢„å‘å¸ƒç‰ˆæœ¬
  - `install_path`: æ ¸å¿ƒå®‰è£…è·¯å¾„

## ğŸ“¦ å‘½ä»¤è¡Œå‚æ•°

```
singbox-manager [OPTIONS]

OPTIONS:
    -i, --interactive       äº¤äº’å¼èœå•æ¨¡å¼
    -c, --config <FILE>     æŒ‡å®šé…ç½®æ–‡ä»¶è·¯å¾„ [é»˜è®¤: config.json]
    -o, --once              ä»…æ‰§è¡Œä¸€æ¬¡æ›´æ–°åé€€å‡º
    -v, --version           æ˜¾ç¤ºç‰ˆæœ¬ä¿¡æ¯
    -h, --help              æ˜¾ç¤ºå¸®åŠ©ä¿¡æ¯
```

## ğŸ¯ ä½¿ç”¨åœºæ™¯

### åœºæ™¯ 1: æ—¥å¸¸ä½¿ç”¨

```bash
# å¯åŠ¨äº¤äº’å¼èœå•ï¼Œæ‰‹åŠ¨ç®¡ç†
./target/release/singbox-manager --interactive
```

### åœºæ™¯ 2: å®šæ—¶ä»»åŠ¡

```bash
# åå°è¿è¡Œï¼Œæ¯24å°æ—¶è‡ªåŠ¨æ›´æ–°
nohup ./target/release/singbox-manager &
```

### åœºæ™¯ 3: ä¸€æ¬¡æ€§æ›´æ–°

```bash
# å¿«é€Ÿæ›´æ–°æ‰€æœ‰å†…å®¹åé€€å‡º
./target/release/singbox-manager --once
```

### åœºæ™¯ 4: è‡ªå®šä¹‰é…ç½®

```bash
# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®æ–‡ä»¶
./target/release/singbox-manager --config /path/to/my_config.json --once
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é¦–æ¬¡ä½¿ç”¨** - è¯·å…ˆç¼–è¾‘ `cm_config.json` é…ç½®æ–‡ä»¶
2. **æƒé™** - ç¡®ä¿æœ‰å†™å…¥æƒé™åˆ°é…ç½®ç›®å½•å’Œå®‰è£…ç›®å½•
3. **ç½‘ç»œ** - éœ€è¦ç¨³å®šçš„ç½‘ç»œè¿æ¥è®¿é—® GitHub
4. **å¤‡ä»½** - æ›´æ–°å‰å»ºè®®å¤‡ä»½é‡è¦é…ç½®æ–‡ä»¶

## ğŸ› æ•…éšœæ’æŸ¥

### ç¼–è¯‘å¤±è´¥

```bash
# æ¸…ç†å¹¶é‡æ–°ç¼–è¯‘
cargo clean
cargo build --release
```

### ä¸‹è½½å¤±è´¥

- æ£€æŸ¥ç½‘ç»œè¿æ¥
- æ£€æŸ¥ GitHub æ˜¯å¦å¯è®¿é—®
- å°è¯•ä½¿ç”¨ä»£ç†

### æƒé™é”™è¯¯

```bash
# æ£€æŸ¥ç›®å½•æƒé™
ls -la /path/to/install/dir

# ä¿®æ”¹æƒé™
chmod 755 /path/to/install/dir
```

### é…ç½®æ–‡ä»¶é”™è¯¯

```bash
# éªŒè¯é…ç½®æ–‡ä»¶
./verify-config.sh
```

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

- âœ… **é›¶è­¦å‘Šç¼–è¯‘** - éµå¾ª Rust æœ€ä½³å®è·µ
- âœ… **å¼‚æ­¥ I/O** - ä½¿ç”¨ Tokio å¼‚æ­¥è¿è¡Œæ—¶
- âœ… **å¹¶å‘ä¸‹è½½** - æ”¯æŒå¹¶å‘å¤„ç†å¤šä¸ªè®¢é˜…
- âœ… **å†…å­˜ä¼˜åŒ–** - æµå¼å¤„ç†å¤§æ–‡ä»¶
- âœ… **é”™è¯¯å¤„ç†** - å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶

## ğŸ”„ æ›´æ–°æ—¥å¿—

### v2.0.0 (2024-12-02)

- âœ… å®Œå…¨é‡å†™ä¸ºçº¯ Rust CLI ç‰ˆæœ¬
- âœ… ç§»é™¤ GUI ç›¸å…³ä»£ç ï¼Œç®€åŒ–æ¶æ„
- âœ… é›¶ç¼–è¯‘è­¦å‘Š
- âœ… ä¼˜åŒ–æ€§èƒ½å’Œç”¨æˆ·ä½“éªŒ
- âœ… æ·»åŠ äº¤äº’å¼èœå•
- âœ… æ”¹è¿›é”™è¯¯å¤„ç†å’Œæ—¥å¿—è¾“å‡º

### v1.0.0

- åˆå§‹ç‰ˆæœ¬ï¼ˆPython + Rust æ··åˆï¼‰

## ğŸ“š æŠ€æœ¯æ ˆ

- **è¯­è¨€**: Rust 2021 Edition
- **å¼‚æ­¥è¿è¡Œæ—¶**: Tokio
- **HTTP å®¢æˆ·ç«¯**: Reqwest
- **JSON å¤„ç†**: Serde
- **å‹ç¼©**: flate2, tar, zip
- **CLI**: Clap

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

## ğŸ“„ è®¸å¯è¯

MIT License

---

**ç‰ˆæœ¬**: 2.0.0  
**å¹³å°**: macOS / Linux / Windows  
**è¯­è¨€**: Rust  
**æœ€åæ›´æ–°**: 2024-12-02
